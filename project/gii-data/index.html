<!DOCTYPE html>
<html lang="en" dir="ltr"><head>
  
                           
     


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.101.0" />
<title>GII Data Pipeline | Jack Gregory</title>








  
    
  
<meta name="description" content="This project combines R, Shiny, MariaDB and AWS to collect, clean, audit and store the data necessary for the annual WIPO Global Innovation Index.">


<meta property="og:site_name" content="Jack Gregory">
<meta property="og:title" content="GII Data Pipeline | Jack Gregory">
<meta property="og:description" content="This project combines R, Shiny, MariaDB and AWS to collect, clean, audit and store the data necessary for the annual WIPO Global Innovation Index." />
<meta property="og:type" content="page" />
<meta property="og:url" content="/project/gii-data/" />
<meta property="og:locale" content="en">




    
        <meta property="og:image" content="/project/gii-data/featured.png" >
        <meta property="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="/project/gii-data/featured.png" >
    
    
  <meta itemprop="name" content="GII Data Pipeline">
<meta itemprop="description" content="ObjectiveTo transition the Global Innovation Index (GII) from a disjointed data collection and quality control process to an industry-standard, cloud-based pipeline that is collaborative, integrated, reproducible, standardized, secure and documented.
DescriptionThe high-level workflow of the GII can be grouped into three phases:
Data; Analysis; and, Output. Figure 1 outlines these phases along with their constituent steps.
Figure 1: High-level GII workflowThis project focuses on the Data phase, where we collect, clean and audit all data necessary for the construction of the Index."><meta itemprop="datePublished" content="2021-02-08T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-02-08T00:00:00+00:00" />
<meta itemprop="wordCount" content="476"><meta itemprop="image" content="/project/gii-data/featured.png">
<meta itemprop="keywords" content="Workflow," />
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X2M61RSEHX"></script>
<script>
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-X2M61RSEHX', { 'anonymize_ip': true });
}
</script>

  
<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-X2M61RSEHX', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  <!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="shortcut icon" href="/img/AdobeStock_168263190_sky.png" type="image/x-icon">
  <link rel="icon" href="/img/AdobeStock_168263190_sky.png" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/style.main.min.a9f2a4292c3a1536884736d2642e2c7f21f17655fe23971612e5664e6b2c58cb.css" integrity="sha256-qfKkKSw6FTaIRzbSZC4sfyHxdlX&#43;I5cWEuVmTmssWMs=" media="screen">
  
  
  <script src="/panelset.min.dca42702d7daf6fd31dc352efd2bcf0e4ac8c05ccaa58d9293f6177462de5d5f.js" type="text/javascript"></script>
  
  
  <script src="/main.min.fcfe821bed4e43fac02ff8e5d8c6cf6c8ceea35bff9601d3f0f8c51016e0f75b.js" type="text/javascript"></script>
</head>
<body>
      <div class="grid-container single">
<header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner">
  <nav class="site-nav db dt-l w-100" role="navigation">
    <a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="/" title="Home">
      <img src="/img/AdobeStock_168263190_black.png" class="dib db-l h2 w-auto" alt="Jack Gregory">
    </a>
    <div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked">
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/about/" title="About Me">About</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/blog/" title="Blog">Blog</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 active" href="/project/" title="Project Portfolio">Projects</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/publication/" title="Published Works">Publications</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/talk/" title="Presentations">Talks</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/cv/" title="Curriculum Vitae">CV</a>
      
      
    </div>
  </nav>
</header>

<main class="page-main pa4" role="main">
  <section class="page-content mw7 center">
    <article class="post-content pa0 ph4-l">
      <header class="post-header">
        <h1 class="f1 lh-solid measure-narrow mb3 fw4">GII Data Pipeline</h1>
        
        <p class="f6 measure lh-copy mv1">By Jack Gregory in <a href="/categories/r">R</a>  <a href="/categories/sql">SQL</a>  <a href="/categories/aws">AWS</a>  <a href="/categories/innovation">Innovation</a>  <a href="/categories/wipo">WIPO</a> </p>
        <p class="f7 db mv0 ttu">February 8, 2021</p>

      
      <div class="ph0 pt5">
        
    
    
    
      
    
    
    
    
    
      
      
  <a class="btn-links mr2 ba dib" href="https://jack-gregory.github.io/GII_Data" target="_blank" rel="noopener"><i class="fas fa-book-open fa-lg fa-fw mr2"></i>documentation</a>


      </div>
      

      </header>
      <section class="post-body pt5 pb4">
        <script src="/project/gii-data/index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="/project/gii-data/index_files/viz/viz.js"></script>
<link href="/project/gii-data/index_files/DiagrammeR-styles/styles.css" rel="stylesheet" />
<script src="/project/gii-data/index_files/grViz-binding/grViz.js"></script>




<h2 id="objective">Objective
  <a href="#objective"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>To transition the Global Innovation Index (GII) from a disjointed data collection and quality control process to an industry-standard, cloud-based pipeline that is collaborative, integrated, reproducible, standardized, secure and documented.</p>




<h2 id="description">Description
  <a href="#description"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>The high-level workflow of the GII can be grouped into three phases:</p>
<ol>
<li>Data;</li>
<li>Analysis; and,</li>
<li>Output.</li>
</ol>
<p>Figure <a href="#fig:gii-workflow">1</a> outlines these phases along with their constituent steps.</p>
<div class="figure">
<div id="htmlwidget-1" style="width:672px;height:336px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"diagram":"\ndigraph {\n\n  ## Define layout\n  graph [\n    layout=dot,\n    rankdir=LR,\n    bgcolor=\"transparent\"\n  ]\n  \n  ## Define global node style\n  node [\n    shape=rectangle, \n    width=1.0, \n    height=0.5, \n    fontname=\"noto sans display\", \n    fontsize=10, \n    style=filled\n  ]\n  \n  ## Define clusters\n  subgraph cluster_data {\n\t\tlabel=\"Data\";\n\t\tlabeljust=l;\n\t\tfontname=\"noto sans display\";\n\t\tfontsize=12;\n\t\tstyle=filled;\n\t\tcolor=lightgrey;\n\t\t\n\t\t## Define cluster node style\n\t\tnode [fillcolor=\"#EC5255\"];\n\t\t\n\t\t## Define cluster nodes\n    collection [label=\"Collection\"]\n    cleaning [label=\"Cleaning\"]\n    audit [label= \"Audit\"]\n\t\t\n\t\t## Define cluster edges\n\t\tcollection -> cleaning -> audit;\n\t}\n\n  subgraph cluster_analysis {\n\t\tlabel=\"Analysis\";\n\t\tlabeljust=l;\n\t\tfontname=\"noto sans display\";\n\t\tfontsize=12;\n\t\tstyle=filled;\n\t\tcolor=lightgrey;\n\t\t\n\t\t## Define cluster node style\n\t\tnode [fillcolor=\"#F7D84E\"];\n\t\t\n\t\t## Define cluster nodes\n    model [label=\"Model\"]\n\t}\n  \n  subgraph cluster_output {\n\t\tlabel=\"Output\";\n\t\tlabeljust=l;\n\t\tfontname=\"noto sans display\";\n\t\tfontsize=12;\n\t\tstyle=filled;\n\t\tcolor=lightgrey;\n\t\t\n\t\t## Define cluster node style\n\t\tnode [fillcolor=\"#83D05F\"];\n\t\t\n\t\t## Define cluster nodes\n    profiles [label=\"Profiles\", ]\n    briefs [label=\"Briefs\"]\n    sources [label=\"Sources &\nDefinitions\"]\n    etc [label=\"...\"]\n  }\n\t\n  # Define edges using node IDs\n  audit -> model -> {profiles, briefs, sources, etc}\n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 1: High-level GII workflow
</p>
</div>
<p>This project focuses on the Data phase, where we collect, clean and audit all data necessary for the construction of the Index. Some of the Output steps are covered as separate projects, including the 
<a href="/project/gii-profiles/">Profiles</a> and 
<a href="/project/gii-briefs/">Briefs</a>.</p>
<p>WIPO and the GII team had historically utilized an ad hoc system for preparing the annual GII rankings and report. The Index relied on a disparate set of MS Excel workbooks, along with non-standardized data collection and cleaning processes scattered across Stata, R and Excel. This exposed the report to serious risks with respect to the accuracy and reproducibility of the associated analyses. For a product with the global reach and influence of the GII, this situation was untenable.</p>
<p>The natural solution involved transitioning to a data pipeline to collect, transform, and store the necessary data. Once functional, the data can then be surfaced to collaborators for a variety of data projects, including those listed in the Analysis and Output phases in Figure <a href="#fig:gii-workflow">1</a>.</p>
<p>The GII Data Pipeline is undergirded by its GitHub repository, as well as the development of the GII Database (GIIDB). The database is built in MariaDB using R and hosted in the cloud on AWS Relational Database Service (RDS). It provides the “single source of truth” for all input and output data associated with the GII. The Pipeline relies on batch processing, whereby “batches” of data are piped into storage at set time intervals. For the GII, this process occurs once per report cycle (i.e., per year).</p>
<p>The Pipeline consists of three main steps: collection, cleaning, and audit. Collection and cleaning are performed concurrently. Data for the GII is sourced from a wide variety of places–including APIs, databases, files, etc.–but unfortunately, such data typically isn’t ready for immediate use. First, we collect the raw data in its native format (e.g., csv or xlsx) and store it in a data lake in the cloud. Next, we clean the data and prepare it for ingestion to the GIIDB. Collection and cleaning are performed through a series of R scripts and Rmarkdown documents.</p>
<p>The audit represents the quality assurace and control step in the Pipeline. It involves describing the data for a particular indicator, as well as identifying potential outliers and missing data points. The process is standardized across all indicators and involves a series of internal R Shiny dashboards. At this point, the data is considered “model-ready” and provides the foundation for our composite indicator model as well as a range of data outputs.</p>
<!-- Further details on the GII Data Pipeline can be found in the associated [blog post](/blog/gii-data/) on the subject as well as in the [project documentation](https://jack-gregory.github.io/GII_Data).  -->

        
        <details closed class="f6 fw7 input-reset">
  <dl class="f6 lh-copy">
    <dt class="fw7">Posted on:</dt>
    <dd class="fw5 ml0">February 8, 2021</dd>
  </dl>
  <dl class="f6 lh-copy">
    <dt class="fw7">Length:</dt>
    <dd class="fw5 ml0">3 minute read, 476 words</dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Categories:</dt>
    <dd class="fw5 ml0"> <a href="/categories/r">R</a>  <a href="/categories/sql">SQL</a>  <a href="/categories/aws">AWS</a>  <a href="/categories/innovation">Innovation</a>  <a href="/categories/wipo">WIPO</a> </dd>
  </dl>
  
  
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Tags:</dt>
    <dd class="fw5 ml0"> <a href="/tags/workflow">Workflow</a> </dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">See Also:</dt>
    
  </dl>
</details>

      </section>
      <footer class="post-footer">
        <div class="post-pagination dt w-100 mt4 mb2">
  
  
    <a class="prev dtc pr2 tl v-top fw6"
    href="/project/gii-briefs/">&larr; GII Economy Briefs</a>
  
  
  
    <a class="next dtc pl2 tr v-top fw6"
    href="/project/gii-profiles/">GII Economy Profiles &rarr;</a>
  
</div>

      </footer>
    </article>
    
  </section>
</main>
<footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo">
  <nav class="db dt-l w-100">
    <p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">
      © 2022 Jack Gregory
      <span class="middot-divider"></span>
      Made with <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source">Hugo Apéro</a></span>.
      <br />
      
Based on <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source">Blogophonic</a></span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL">Formspree</a>.
    </p>
    
    <div class="site-social-links db dtc-l v-mid w-100 w-33-l tc pv2 pv0-l mv0">
      <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/jack-gregory/" title="github" target="_blank" rel="noopener">
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.linkedin.com/in/jackgregory/" title="linkedin" target="_blank" rel="noopener">
      <i class="fab fa-linkedin fa-lg fa-fw"></i>
    </a>
  
    
    
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://orcid.org/0000-0003-2942-6024" title="orcid" target="_blank" rel="noopener">
      <i class="ai ai-orcid fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="/blog/index.xml" title="rss" >
      <i class="fas fa-rss fa-lg fa-fw"></i>
    </a>
  
</div>

    </div>
    
    <div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0">
      
      <a class="dib pv1 ph2 link" href="/license/" title="License">License</a>
      
      <a class="dib pv1 ph2 link" href="/contact/" title="Contact Form">Contact</a>
      
    </div>
  </nav>
  
    <script>

    var i, text, code, codes = document.getElementsByTagName('code');
    for (let i = 0; i < codes.length;) {
      code = codes[i];
      if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
        text = code.textContent;
        if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
          text = text.replace(/^\$/, '\\(').replace(/\$$/, '\\)');
          code.textContent = text;
        }
        if (/^\\\((.|\s)+\\\)$/.test(text) ||
            /^\\\[(.|\s)+\\\]$/.test(text) ||
            /^\$(.|\s)+\$$/.test(text) ||
            /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
          code.outerHTML = code.innerHTML;  
          continue;
        }
      }
      i++;
    }
</script>

  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>



    
  
  
</footer>

      </div>
    </body>
</html>
